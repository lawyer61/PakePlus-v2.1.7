{"message":"Not Found","documentation_url":"https://docs.github.com/rest/git/refs#get-all-references-in-a-namespace","status":"404","name":"addaabaaaeff","url":"https://weread.qq.com","showName":"weread","appid":"test.weread.com","icon":"","iconPath":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":true,"version":"0.0.1","preview":"desktop","platform":["3-1","3-2"],"width":800,"height":600,"desc":"","jsFile":[],"filterCss":"","customJs":"\nconst { invoke } = window.__TAURI__.core;\n\nconst GOTIFY_URL = \"https://gotify.11091997.xyz\";\nconst GOTIFY_TOKEN = \"AyqULs36vIabTiB\";\nconst GOTIFY_TITLE = \"未找到书架\";\nconst GOTIFY_MESSAGE = \"脚本在首页未找到'我的书架'元素，已终止。\";\n\nconst START_HOUR = 0;\nconst END_HOUR = 23;\nconst MAX_DURATION_MS = 60 * 60 * 1000; // 1 hour\n\nconst scriptStartTime = Date.now();\n\nfunction sendNotification(title, message) {\n    const command = `curl \"${GOTIFY_URL}/message?token=${GOTIFY_TOKEN}\" -F \"title=${title}\" -F \"message=${message}\"`;\n    invoke('run_command', { command });\n    console.log(\"发送通知:\", title);\n}\n\nfunction clickElement(selector) {\n    const element = document.querySelector(selector);\n    if (element) {\n        element.click();\n        return true;\n    }\n    return false;\n}\n\nfunction findElementByText(tag, text) {\n    return Array.from(document.querySelectorAll(tag)).find(el => el.textContent.trim() === text);\n}\n\nfunction scrollToBottom() {\n    window.scrollTo(0, document.body.scrollHeight);\n}\n\nfunction main() {\n    // 1. Check time\n    const currentHour = new Date().getHours();\n    if (currentHour < START_HOUR || currentHour >= END_HOUR) {\n        console.log(\"不在指定时间段内，脚本退出。\");\n        return;\n    }\n\n    // 4. Check runtime duration\n    if (Date.now() - scriptStartTime > MAX_DURATION_MS) {\n        console.log(\"脚本运行超过1小时，退出。\");\n        if (clickElement('a.readerTopBar_link:nth-child(1)')) {\n            console.log(\"已点击返回首页。\");\n        }\n        return;\n    }\n\n    // 2. Check if on book page\n    if (document.querySelector('a.readerTopBar_link:nth-child(1)')) {\n        console.log(\"在书籍页面，返回首页。\");\n        clickElement('a.readerTopBar_link:nth-child(1)');\n        // Wait a bit for the page to navigate\n        setTimeout(checkHomePage, 2000);\n        return;\n    }\n\n    checkHomePage();\n}\n\nfunction checkHomePage() {\n     // 2.1 Find \"我的书架\"\n    const bookshelfElement = findElementByText('div', '我的书架');\n\n    if (!bookshelfElement) {\n        console.log(\"未找到'我的书架'，发送通知并终止。\");\n        sendNotification(GOTIFY_TITLE, GOTIFY_MESSAGE);\n        return;\n    }\n\n    // 2.2 Click on the first book\n    console.log(\"找到'我的书架'，打开第一本书。\");\n    if (clickElement('a.wr_suggestion_card_wrapper:nth-child(1)')) {\n        // Wait for the book to open\n        setTimeout(readBook, 5000);\n    } else {\n        console.log(\"未找到第一本书。\");\n    }\n}\n\n\nfunction readBook() {\n    console.log(\"开始阅读书籍，每10秒滚动一次。\");\n\n    const scrollInterval = setInterval(() => {\n        // 4. Check runtime duration again inside interval\n        if (Date.now() - scriptStartTime > MAX_DURATION_MS) {\n            console.log(\"脚本运行超过1小时，停止阅读并退出。\");\n            clearInterval(scrollInterval);\n            if (clickElement('a.readerTopBar_link:nth-child(1)')) {\n                console.log(\"已点击返回首页。\");\n            }\n            return;\n        }\n\n        // 3. Scroll and check for footer\n        const footerButton = document.querySelector('.readerFooter_button');\n        if (footerButton) {\n            console.log(\"到达页面底部，点击页脚按钮。\");\n            footerButton.click();\n            clearInterval(scrollInterval);\n             // Go back to the main loop after a delay\n            setTimeout(main, 2000);\n        } else {\n            console.log(\"向下滚动...\");\n            scrollToBottom();\n        }\n    }, 10000); // 10 seconds\n}\n\n// Start the script\nconsole.log(\"启动微信读书自动化脚本。\");\nmain();\n","isHtml":false,"htmlPath":"","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v2.1.7","iosRepo":"PakePlus-iOS-v2.1.7","androidRepo":"PakePlus-Android-v2.1.7","more":{"windows":{"label":"addaabaaaeff","title":"weread","url":"https://weread.qq.com","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","width":800,"height":600,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"fullScreen":false,"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"addaabaaaeff","showName":"weread","version":"0.0.1","webUrl":"https://weread.qq.com","id":"test.weread.com.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes","isHtml":false,"debug":false,"safeArea":"all"},"android":{"name":"addaabaaaeff","showName":"weread","version":"0.0.1","webUrl":"https://weread.qq.com","id":"test.weread.com.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes","isHtml":false,"debug":false,"safeArea":"all"},"desktop":{"name":"addaabaaaeff","showName":"weread","version":"0.0.1","id":"test.weread.com.desktop","desc":"Package for personal use only, please do not use for commercial purposes","webUrl":"https://weread.qq.com","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"Package for personal use only, please do not use for commercial purposes","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":true,"buildMethod":"cloud","debug":false}}